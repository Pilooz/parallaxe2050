<%- include('../partials/head', { data: data }) %>
<!-- START // Styles in head -->
    <link type="text/css" href="css/hardware/step-2.css" rel="stylesheet">
<!-- END // Styles in head -->
<%- include('../partials/header', { data: data }) %>

<div id="thumbnail">
    <img src="medias/hardware/laetitia-intro.PNG" />
</div>

<div id="waitingRoberta">
    <h1>Roberta</h1>
    <small></small>
    <div class="message">En attente de câblage</div>
    <div class="animation">
        <div class="spinner"></div>
    </div>
</div>

<script>
$(document).ready(function() {
    var nextStep = '<%-data.currentStep.transitions[0].id %>';
    var solutions = false;

    // TODO : Récupérer la bonne référence à afficher sur l'ihm (set 1 ou set 2 du jeu)
    // Récupère la référence
    var ref = '<%-data.currentStep.solutions[1].ref %>';
    $('small').html('REF : ' + ref);

    // 
    socket.on('toclient.solutions', function(data){
    if (data.state) {
        solutions = true;
    } else {
        solutions = false;
    }
    });
    socket.on('toclient.robotFinished', function(){
        if (solutions) {
            socket.emit('toserver.nextStep', {nextStep: nextStep});
        }
    });
});
</script>

<!-- START // Scripts in footer -->
<!-- END // Scripts in footer -->
<%- include('../partials/footer', { data: data }) %>